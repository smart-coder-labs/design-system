import{r as p}from"./iframe-Dan5ncgG.js";import{f as d,i as y,J as V,M as h}from"./proxy-DCTGQFKY.js";import{u as C,a as x}from"./use-transform-CqgZm8hS.js";function A(t,n,i){const o=t.get();let e=null,c=o,m;const u=typeof o=="string"?o.replace(/[\d.-]/g,""):void 0,s=()=>{e&&(e.stop(),e=null)},S=()=>{s(),e=new V({keyframes:[g(t.get()),g(c)],velocity:t.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...i,onUpdate:m})};if(t.attach((r,a)=>{c=r,m=f=>a(l(f,u)),d.postRender(()=>{S(),t.events.animationStart?.notify(),e?.then(()=>{t.events.animationComplete?.notify()})})},s),y(n)){const r=n.on("change",f=>t.set(l(f,u))),a=t.on("destroy",r);return()=>{r(),a()}}return s}function l(t,n){return n?t+n:t}function g(t){return typeof t=="number"?t:parseFloat(t)}function b(t,n={}){const{isStatic:i}=p.useContext(h),o=()=>y(t)?t.get():t;if(i)return C(o);const e=x(o());return p.useInsertionEffect(()=>A(e,t,n),[e,JSON.stringify(n)]),e}export{b as u};
