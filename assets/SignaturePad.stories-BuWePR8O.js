import{j as n}from"./jsx-runtime-u17CrQMm.js";import{r as c}from"./iframe-vYzePaRW.js";import{c as q}from"./utils-CDN07tui.js";import{B as j}from"./Button-Bvw_y_KB.js";import{c as M}from"./createLucideIcon-Ckxz52bH.js";import{D as P}from"./download-DO7YiRJe.js";import"./preload-helper-PPVm8Dsz.js";import"./proxy-DMGrdN83.js";const W=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],_=M("eraser",W),R=({width:w,height:v=200,penColor:d="#000000",backgroundColor:i="#FFFFFF",strokeWidth:u=2,onEnd:S,className:E})=>{const a=c.useRef(null),[k,C]=c.useState(!1),[m,N]=c.useState(!1),y=c.useRef(null);c.useEffect(()=>{const e=a.current;if(!e)return;const t=e.getContext("2d");t&&(t.lineCap="round",t.lineJoin="round",t.strokeStyle=d,t.lineWidth=u,t.fillStyle=i,t.fillRect(0,0,e.width,e.height))},[d,i,u]),c.useEffect(()=>{const e=()=>{if(y.current&&a.current&&!w){const t=y.current.offsetWidth,s=a.current,r=document.createElement("canvas"),l=r.getContext("2d");r.width=s.width,r.height=s.height,l?.drawImage(s,0,0),s.width=t,s.height=v;const o=s.getContext("2d");o&&(o.lineCap="round",o.lineJoin="round",o.strokeStyle=d,o.lineWidth=u,o.fillStyle=i,o.fillRect(0,0,s.width,s.height))}};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[w,v,d,u,i]);const D=e=>{const t=a.current;if(!t)return{x:0,y:0};const s=t.getBoundingClientRect();let r,l;return"touches"in e?(r=e.touches[0].clientX,l=e.touches[0].clientY):(r=e.clientX,l=e.clientY),{x:r-s.left,y:l-s.top}},b=e=>{e.preventDefault(),C(!0);const{x:t,y:s}=D(e),r=a.current?.getContext("2d");r&&(r.beginPath(),r.moveTo(t,s))},T=e=>{if(e.preventDefault(),!k)return;const{x:t,y:s}=D(e),r=a.current?.getContext("2d");r&&(r.lineTo(t,s),r.stroke(),m||N(!0))},F=()=>{if(k){C(!1);const e=a.current;e&&S&&S(e.toDataURL())}},L=()=>{const e=a.current,t=e?.getContext("2d");e&&t&&(t.fillStyle=i,t.fillRect(0,0,e.width,e.height),N(!1))},B=()=>{const e=a.current;if(e){const t=e.toDataURL("image/png"),s=document.createElement("a");s.download=`signature-${Date.now()}.png`,s.href=t,s.click()}};return n.jsxs("div",{className:q("flex flex-col gap-4 w-full max-w-md",E),ref:y,children:[n.jsxs("div",{className:"relative rounded-xl overflow-hidden border border-border-primary shadow-sm bg-white touch-none",children:[n.jsx("canvas",{ref:a,width:w||400,height:v,className:"cursor-crosshair block",onMouseDown:b,onMouseMove:T,onMouseUp:F,onMouseLeave:F,onTouchStart:b,onTouchMove:T,onTouchEnd:F}),!m&&n.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none text-text-tertiary/30 text-2xl font-handwriting select-none",children:"Sign here"})]}),n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsxs(j,{variant:"ghost",size:"sm",onClick:L,disabled:!m,className:"text-status-error hover:bg-status-error/10 hover:text-status-error",children:[n.jsx(_,{className:"w-4 h-4 mr-2"}),"Clear"]}),n.jsxs(j,{variant:"outline",size:"sm",onClick:B,disabled:!m,children:[n.jsx(P,{className:"w-4 h-4 mr-2"}),"Save"]})]})]})};R.__docgenInfo={description:"",methods:[],displayName:"SignaturePad",props:{width:{required:!1,tsType:{name:"number"},description:"Width of the canvas in pixels (default: 100% of container)"},height:{required:!1,tsType:{name:"number"},description:"Height of the canvas in pixels (default: 200)",defaultValue:{value:"200",computed:!1}},penColor:{required:!1,tsType:{name:"string"},description:"Color of the pen stroke (default: #000000)",defaultValue:{value:"'#000000'",computed:!1}},backgroundColor:{required:!1,tsType:{name:"string"},description:"Background color of the canvas (default: #FFFFFF)",defaultValue:{value:"'#FFFFFF'",computed:!1}},strokeWidth:{required:!1,tsType:{name:"number"},description:"Stroke width (default: 2)",defaultValue:{value:"2",computed:!1}},onEnd:{required:!1,tsType:{name:"signature",type:"function",raw:"(dataUrl: string) => void",signature:{arguments:[{type:{name:"string"},name:"dataUrl"}],return:{name:"void"}}},description:"Callback when drawing ends"},className:{required:!1,tsType:{name:"string"},description:"Additional CSS classes"}}};const J={title:"Data Display/SignaturePad",component:R,parameters:{layout:"centered"},tags:[],argTypes:{penColor:{control:"color"},backgroundColor:{control:"color"},strokeWidth:{control:{type:"range",min:1,max:10,step:.5}}}},p={args:{className:"w-[400px]"}},f={args:{penColor:"#007AFF",className:"w-[400px]"}},g={args:{strokeWidth:4,className:"w-[400px]"}},h={args:{backgroundColor:"#F5F5F7",className:"w-[400px]"}},x={args:{width:600,height:300,className:"w-[600px]"}};p.parameters={...p.parameters,docs:{...p.parameters?.docs,source:{originalSource:`{
  args: {
    className: "w-[400px]"
  }
}`,...p.parameters?.docs?.source}}};f.parameters={...f.parameters,docs:{...f.parameters?.docs,source:{originalSource:`{
  args: {
    penColor: "#007AFF",
    className: "w-[400px]"
  }
}`,...f.parameters?.docs?.source}}};g.parameters={...g.parameters,docs:{...g.parameters?.docs,source:{originalSource:`{
  args: {
    strokeWidth: 4,
    className: "w-[400px]"
  }
}`,...g.parameters?.docs?.source}}};h.parameters={...h.parameters,docs:{...h.parameters?.docs,source:{originalSource:`{
  args: {
    backgroundColor: "#F5F5F7",
    className: "w-[400px]"
  }
}`,...h.parameters?.docs?.source}}};x.parameters={...x.parameters,docs:{...x.parameters?.docs,source:{originalSource:`{
  args: {
    width: 600,
    height: 300,
    className: "w-[600px]"
  }
}`,...x.parameters?.docs?.source}}};const O=["Default","BluePen","ThickStroke","CustomBackground","Large"];export{f as BluePen,h as CustomBackground,p as Default,x as Large,g as ThickStroke,O as __namedExportsOrder,J as default};
