import{j as r}from"./jsx-runtime-u17CrQMm.js";import{r as i}from"./iframe-B9hmpDEG.js";import{B as o}from"./Button-yOzj7y9F.js";import{m as h}from"./proxy-Dckdfu8t.js";import"./preload-helper-PPVm8Dsz.js";const x=({error:s,resetErrorBoundary:e})=>r.jsxs(h.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center p-8 text-center bg-surface-primary rounded-2xl border border-border-primary shadow-sm max-w-md mx-auto my-8",children:[r.jsx("div",{className:"w-16 h-16 bg-status-error/10 text-status-error rounded-full flex items-center justify-center mb-6",children:r.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),r.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]})}),r.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-2",children:"Something went wrong"}),r.jsx("p",{className:"text-text-secondary mb-6 text-sm leading-relaxed",children:s?.message||"An unexpected error occurred while rendering this component."}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(o,{variant:"secondary",onClick:()=>window.location.reload(),children:"Reload Page"}),r.jsx(o,{variant:"primary",onClick:e,children:"Try Again"})]}),!1]});class c extends i.Component{constructor(e){super(e),this.resetErrorBoundary=()=>{this.props.onReset&&this.props.onReset(),this.setState({hasError:!1,error:null})},this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.props.onError&&this.props.onError(e,t),console.error("ErrorBoundary caught an error:",e,t)}render(){return this.state.hasError?this.props.fallback?typeof this.props.fallback=="function"?this.props.fallback(this.state.error,this.resetErrorBoundary):this.props.fallback:r.jsx(x,{error:this.state.error,resetErrorBoundary:this.resetErrorBoundary}):this.props.children}}c.__docgenInfo={description:"",methods:[{name:"resetErrorBoundary",docblock:null,modifiers:[],params:[],returns:null}],displayName:"ErrorBoundary",props:{children:{required:!0,tsType:{name:"ReactNode"},description:"The content to be rendered when no error occurs"},fallback:{required:!1,tsType:{name:"union",raw:"ReactNode | ((error: Error, resetErrorBoundary: () => void) => ReactNode)",elements:[{name:"ReactNode"},{name:"unknown"}]},description:"Custom fallback UI. Can be a node or a function receiving the error and reset callback"},onError:{required:!1,tsType:{name:"signature",type:"function",raw:"(error: Error, errorInfo: ErrorInfo) => void",signature:{arguments:[{type:{name:"Error"},name:"error"},{type:{name:"ErrorInfo"},name:"errorInfo"}],return:{name:"void"}}},description:"Callback fired when an error is caught"},onReset:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Callback fired when the error boundary is reset"}}};const k={title:"Utils/ErrorBoundary",component:c,parameters:{layout:"centered"},tags:[]},f=({shouldThrow:s})=>{if(s)throw new Error("I crashed!");return r.jsxs("div",{className:"p-6 bg-surface-success/10 border border-status-success rounded-xl text-center",children:[r.jsx("h3",{className:"text-status-success font-medium mb-2",children:"Component Working"}),r.jsx("p",{className:"text-sm text-text-secondary",children:"No errors here."})]})},d=s=>{const[e,t]=i.useState(!1),[l,m]=i.useState(0),u=()=>{t(!1),m(p=>p+1)};return r.jsxs("div",{className:"flex flex-col gap-6 items-center min-w-[400px]",children:[r.jsxs("div",{className:"flex gap-4",children:[r.jsx(o,{variant:e?"secondary":"destructive",onClick:()=>t(!0),disabled:e,children:"Trigger Error"}),r.jsx(o,{variant:"secondary",onClick:u,disabled:!e,children:"Reset Demo"})]}),r.jsx("div",{className:"w-full",children:r.jsx(c,{...s,onReset:()=>t(!1),children:r.jsx(f,{shouldThrow:e})},l)})]})},a={render:s=>r.jsx(d,{...s})},n={render:s=>r.jsx(d,{...s}),args:{fallback:(s,e)=>r.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:[r.jsx("p",{className:"font-bold",children:"Custom Error Fallback"}),r.jsx("p",{className:"text-sm mb-4",children:s.message}),r.jsx(o,{size:"sm",variant:"destructive",onClick:e,children:"Try Again"})]})}};a.parameters={...a.parameters,docs:{...a.parameters?.docs,source:{originalSource:`{
  render: args => <ErrorBoundaryDemo {...args} />
}`,...a.parameters?.docs?.source}}};n.parameters={...n.parameters,docs:{...n.parameters?.docs,source:{originalSource:`{
  render: args => <ErrorBoundaryDemo {...args} />,
  args: {
    fallback: (error: Error, reset: () => void) => <div className="p-4 bg-red-50 border border-red-200 rounded-lg text-red-700">
                <p className="font-bold">Custom Error Fallback</p>
                <p className="text-sm mb-4">{error.message}</p>
                <Button size="sm" variant="destructive" onClick={reset}>
                    Try Again
                </Button>
            </div>
  }
}`,...n.parameters?.docs?.source}}};const v=["Default","CustomFallback"];export{n as CustomFallback,a as Default,v as __namedExportsOrder,k as default};
