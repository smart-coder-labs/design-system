import{j as e}from"./jsx-runtime-u17CrQMm.js";import{r}from"./iframe-BMG7cCGY.js";import{c as L}from"./utils-CDN07tui.js";import{B as y}from"./Button-b5E49-AF.js";import{I as R}from"./Input-Bj6YDSzx.js";import{S as q,a as B,b as U,c as _,f as n}from"./Select-N_zq3AgL.js";import{R as $}from"./refresh-cw-C_PPQXyh.js";import{c as A}from"./createLucideIcon-11Koirjv.js";import{C as M}from"./check-CxM0X9Wl.js";import{C as O}from"./copy-D7PVYPqI.js";import{D as F}from"./download-5ZtOkWqv.js";import"./preload-helper-PPVm8Dsz.js";import"./proxy-BFHmY9N3.js";import"./index-DYRg01H_.js";import"./index-CUx6A_lE.js";import"./chevron-down-ju9NnqWs.js";const G=[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]],z=A("barcode",G),j=({defaultValue:N="1234567890",format:S="code128",scale:x=3,includeText:w=!0,showInput:C=!1,className:I})=>{const[t,V]=r.useState(N),[f,T]=r.useState(S),[o,E]=r.useState(""),[v,h]=r.useState(!0),[g,b]=r.useState(!1);r.useEffect(()=>{if(!t)return;h(!0);const a=encodeURIComponent(t),c=`https://bwipjs-api.metafloor.com/?bcid=${f}&text=${a}&scale=${x}&rotate=N${w?"&includetext":""}`,s=new Image;s.src=c,s.onload=()=>{E(c),h(!1)},s.onerror=()=>{h(!1)}},[t,f,x,w]);const k=async()=>{try{const c=await(await fetch(o)).blob(),s=window.URL.createObjectURL(c),l=document.createElement("a");l.href=s,l.download=`barcode-${t}-${Date.now()}.png`,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(s)}catch(a){console.error("Error downloading barcode:",a),window.open(o,"_blank")}},D=()=>{navigator.clipboard.writeText(t),b(!0),setTimeout(()=>b(!1),2e3)};return e.jsxs("div",{className:L("flex flex-col items-center gap-6 p-6 rounded-2xl bg-surface-primary border border-border-primary shadow-sm w-full max-w-md",I),children:[C&&e.jsxs("div",{className:"w-full space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-text-secondary",children:"Content"}),e.jsx(R,{value:t,onChange:a=>V(a.target.value),placeholder:"Enter value...",className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-text-secondary",children:"Format"}),e.jsxs(q,{value:f,onValueChange:a=>T(a),children:[e.jsx(B,{children:e.jsx(U,{placeholder:"Select format"})}),e.jsxs(_,{children:[e.jsx(n,{value:"code128",children:"Code 128 (Standard)"}),e.jsx(n,{value:"ean13",children:"EAN-13 (Retail)"}),e.jsx(n,{value:"upca",children:"UPC-A (US Retail)"}),e.jsx(n,{value:"code39",children:"Code 39"}),e.jsx(n,{value:"itf14",children:"ITF-14 (Logistics)"})]})]})]})]}),e.jsxs("div",{className:"relative min-h-[120px] w-full flex items-center justify-center p-4 bg-white rounded-xl border border-border-secondary shadow-inner overflow-hidden",children:[v&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/80 z-10",children:e.jsx($,{className:"w-6 h-6 text-accent-blue animate-spin"})}),o?e.jsx("img",{src:o,alt:`Barcode ${t}`,className:"max-w-full h-auto object-contain mix-blend-multiply"}):e.jsxs("div",{className:"flex flex-col items-center text-text-tertiary",children:[e.jsx(z,{className:"w-8 h-8 mb-2 opacity-50"}),e.jsx("span",{className:"text-xs",children:"Invalid Data"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.jsxs(y,{variant:"outline",className:"flex-1",onClick:D,title:"Copy value to clipboard",children:[g?e.jsx(M,{className:"w-4 h-4 mr-2"}):e.jsx(O,{className:"w-4 h-4 mr-2"}),g?"Copied":"Copy Text"]}),e.jsxs(y,{variant:"primary",className:"flex-1",onClick:k,disabled:!o||v,children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Download"]})]})]})};j.__docgenInfo={description:"",methods:[],displayName:"BarcodeGenerator",props:{defaultValue:{required:!1,tsType:{name:"string"},description:"Initial value for the barcode",defaultValue:{value:'"1234567890"',computed:!1}},format:{required:!1,tsType:{name:"union",raw:"'code128' | 'ean13' | 'upca' | 'code39' | 'itf14' | 'qrcode'",elements:[{name:"literal",value:"'code128'"},{name:"literal",value:"'ean13'"},{name:"literal",value:"'upca'"},{name:"literal",value:"'code39'"},{name:"literal",value:"'itf14'"},{name:"literal",value:"'qrcode'"}]},description:"Barcode format (default: code128)",defaultValue:{value:'"code128"',computed:!1}},scale:{required:!1,tsType:{name:"number"},description:"Scale factor (1-5, default: 3)",defaultValue:{value:"3",computed:!1}},includeText:{required:!1,tsType:{name:"boolean"},description:"Show the text value below the barcode",defaultValue:{value:"true",computed:!1}},showInput:{required:!1,tsType:{name:"boolean"},description:"Show an internal input to change the value",defaultValue:{value:"false",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"Class name for the container"}}};const ne={title:"Data Display/BarcodeGenerator",component:j,parameters:{layout:"centered"},tags:[],argTypes:{format:{control:"select",options:["code128","ean13","upca","code39","itf14"]},scale:{control:{type:"range",min:1,max:5,step:1}}}},d={args:{defaultValue:"1234567890",showInput:!0}},i={args:{defaultValue:"978020137962",format:"ean13",showInput:!0}},u={args:{defaultValue:"CODE-39-TEST",format:"code39",showInput:!0}},m={args:{defaultValue:"1234567890",includeText:!1,showInput:!1}},p={args:{defaultValue:"1234567890",scale:5,showInput:!1}};d.parameters={...d.parameters,docs:{...d.parameters?.docs,source:{originalSource:`{
  args: {
    defaultValue: "1234567890",
    showInput: true
  }
}`,...d.parameters?.docs?.source}}};i.parameters={...i.parameters,docs:{...i.parameters?.docs,source:{originalSource:`{
  args: {
    defaultValue: "978020137962",
    // Valid EAN-13 example
    format: "ean13",
    showInput: true
  }
}`,...i.parameters?.docs?.source}}};u.parameters={...u.parameters,docs:{...u.parameters?.docs,source:{originalSource:`{
  args: {
    defaultValue: "CODE-39-TEST",
    format: "code39",
    showInput: true
  }
}`,...u.parameters?.docs?.source}}};m.parameters={...m.parameters,docs:{...m.parameters?.docs,source:{originalSource:`{
  args: {
    defaultValue: "1234567890",
    includeText: false,
    showInput: false
  }
}`,...m.parameters?.docs?.source}}};p.parameters={...p.parameters,docs:{...p.parameters?.docs,source:{originalSource:`{
  args: {
    defaultValue: "1234567890",
    scale: 5,
    showInput: false
  }
}`,...p.parameters?.docs?.source}}};const ce=["Default","EAN13","Code39","NoText","LargeScale"];export{u as Code39,d as Default,i as EAN13,p as LargeScale,m as NoText,ce as __namedExportsOrder,ne as default};
