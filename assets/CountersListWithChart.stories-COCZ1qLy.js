import{j as e}from"./jsx-runtime-u17CrQMm.js";import{r as $}from"./iframe-Cb93e_Z8.js";import{c as d}from"./utils-CDN07tui.js";import"./preload-helper-PPVm8Dsz.js";const w=(s,r,o,i)=>{const t=(i-90)*Math.PI/180;return{x:s+o*Math.cos(t),y:r+o*Math.sin(t)}},P=(s,r,o,i,t)=>{const l=w(s,r,o,t),n=w(s,r,o,i),a=t-i<=180?"0":"1";return["M",l.x,l.y,"A",o,o,0,a,0,n.x,n.y,"L",s,r,"Z"].join(" ")},N=({type:s,data:r,options:o,className:i,size:t=220,activeIndex:l=null,onSliceHover:n})=>{r?.labels;const a=r?.datasets&&r.datasets[0],c=a?.data||[],m=a?.backgroundColor||[],v=c.reduce((p,h)=>p+(Number(h)||0),0)||1;if(s==="pie"||s==="donut"){let p=0;const h=t/2,y=t/2,C=t/2-4,q=s==="donut"?C*.55:0;return e.jsx("div",{className:d("inline-block",i),style:{width:t,height:t},children:e.jsx("svg",{viewBox:`0 0 ${t} ${t}`,width:t,height:t,className:"block",role:"img","aria-label":"Pie chart",children:e.jsxs("g",{children:[c.map((k,u)=>{const j=Number(k)||0,A=p/v*360;p+=j;const I=p/v*360,L=P(h,y,C,A,I),M=m[u]||`hsl(${u*60%360} 75% 55%)`,g=l===u,_=l===null||g?1:.45,W=g?{transform:"scale(1.03)",transformOrigin:`${h}px ${y}px`}:void 0;return e.jsx("path",{d:L,fill:M,stroke:"rgba(0,0,0,0.06)",strokeWidth:g?1.5:.5,style:{transition:"opacity 180ms ease, transform 180ms ease",opacity:_,...W},className:"chart-slice",onMouseEnter:()=>n&&n(u),onMouseLeave:()=>n&&n(null),onFocus:()=>n&&n(u),onBlur:()=>n&&n(null),tabIndex:0,"aria-label":`${r?.labels?.[u]||"slice"}: ${j}`},u)}),s==="donut"&&e.jsx("circle",{cx:h,cy:y,r:q,fill:"var(--surface-primary, #0b1220)"})]})})})}return e.jsx("div",{className:d("bg-surface-primary rounded-xl shadow p-4 flex items-center justify-center min-h-[180px]",i),children:e.jsxs("span",{className:"text-text-secondary",children:["[Chart: ",s,"]"]})})};N.__docgenInfo={description:"",methods:[],displayName:"Chart",props:{type:{required:!0,tsType:{name:"union",raw:"'pie' | 'donut' | 'line' | 'bar' | 'radial'",elements:[{name:"literal",value:"'pie'"},{name:"literal",value:"'donut'"},{name:"literal",value:"'line'"},{name:"literal",value:"'bar'"},{name:"literal",value:"'radial'"}]},description:""},data:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  labels?: string[];
  datasets?: Array<{ data: number[]; backgroundColor?: string[] }>;
}`,signature:{properties:[{key:"labels",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"datasets",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ data: number[]; backgroundColor?: string[] }",signature:{properties:[{key:"data",value:{name:"Array",elements:[{name:"number"}],raw:"number[]",required:!0}},{key:"backgroundColor",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}}]}}],raw:"Array<{ data: number[]; backgroundColor?: string[] }>",required:!1}}]}},description:""},options:{required:!1,tsType:{name:"any"},description:""},className:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"220",computed:!1}},activeIndex:{required:!1,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:"",defaultValue:{value:"null",computed:!1}},onSliceHover:{required:!1,tsType:{name:"signature",type:"function",raw:"(index: number | null) => void",signature:{arguments:[{type:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},name:"index"}],return:{name:"void"}}},description:""}}};const b=({title:s,items:r,chartType:o="donut",className:i})=>{const[t,l]=$.useState(null),n={labels:r.map(a=>a.label),datasets:[{data:r.map(a=>a.value),backgroundColor:r.map(a=>a.color||"#3b82f6")}]};return e.jsxs("div",{className:d("bg-surface-primary rounded-2xl shadow-lg p-6 flex flex-col md:flex-row gap-6",i),children:[e.jsxs("div",{className:"flex-1 flex flex-col gap-4 justify-center",children:[s&&e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:s}),r.map((a,c)=>{const m=t===c;return e.jsxs("div",{className:d("flex items-center justify-between py-2 border-b last:border-b-0 transition-colors",m?"bg-surface-secondary/80 rounded-lg px-3":"border-gray-800"),onMouseEnter:()=>l(c),onMouseLeave:()=>l(null),onFocus:()=>l(c),onBlur:()=>l(null),tabIndex:0,role:"button","aria-pressed":m,children:[e.jsx("span",{className:d("text-base font-medium","text-text-primary"),children:a.label}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:d("text-xl font-bold","text-text-primary"),children:a.value}),e.jsxs("span",{className:"text-base font-semibold",style:{color:a.color||"#3b82f6"},children:[a.percent,"%"]})]})]},c)})]}),e.jsx("div",{className:"flex items-center justify-center md:w-1/3",children:e.jsx(N,{type:o,data:n,activeIndex:t,onSliceHover:a=>l(a)})})]})};b.__docgenInfo={description:"",methods:[],displayName:"CountersListWithChart",props:{title:{required:!1,tsType:{name:"string"},description:""},items:{required:!0,tsType:{name:"Array",elements:[{name:"CountersListWithChartItem"}],raw:"CountersListWithChartItem[]"},description:""},chartType:{required:!1,tsType:{name:"union",raw:"'donut' | 'pie'",elements:[{name:"literal",value:"'donut'"},{name:"literal",value:"'pie'"}]},description:"",defaultValue:{value:"'donut'",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""}}};const B={title:"Data/CountersListWithChart",component:b},T=[{label:"First Service Residential",value:116,percent:56,color:"#4f8afc"},{label:"KW Property Management",value:32,percent:32,color:"#a78bfa"},{label:"Marquis Association Management",value:19,percent:9,color:"#34d399"}],f=()=>e.jsx(b,{title:"Companies with more managers",items:T,chartType:"donut"}),x=()=>e.jsx(b,{title:"Companies with more managers",items:T,chartType:"pie"});f.__docgenInfo={description:"",methods:[],displayName:"Default"};x.__docgenInfo={description:"",methods:[],displayName:"PieChart"};f.parameters={...f.parameters,docs:{...f.parameters?.docs,source:{originalSource:'() => <CountersListWithChart title="Companies with more managers" items={items} chartType="donut" />',...f.parameters?.docs?.source}}};x.parameters={...x.parameters,docs:{...x.parameters?.docs,source:{originalSource:'() => <CountersListWithChart title="Companies with more managers" items={items} chartType="pie" />',...x.parameters?.docs?.source}}};const V=["Default","PieChart"];export{f as Default,x as PieChart,V as __namedExportsOrder,B as default};
