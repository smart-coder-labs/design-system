import{j as n}from"./jsx-runtime-u17CrQMm.js";import{r as s}from"./iframe-CGazvlvx.js";import{r as D}from"./index-D6mcrAZ6.js";import{c as R}from"./utils-CDN07tui.js";import{C as T}from"./chevron-down-CG3v-0Pn.js";import{C as k}from"./check-D3Ma7fjX.js";const V=s.createContext(null);function C(){const e=s.useContext(V);if(!e)throw new Error("Select components must be used within Select");return e}const F=({value:e,defaultValue:a,onValueChange:t,children:c,disabled:m=!1})=>{const[o,d]=s.useState(!1),[h,S]=s.useState(a),[u,b]=s.useState(new Map),[x,w]=s.useState(),r=s.useRef(null),i=e??h,N=s.useCallback(l=>{e===void 0&&S(l),t?.(l),d(!1)},[e,t]),g=s.useCallback((l,p,j)=>{b(O=>{const q=new Map(O);return q.set(l,{value:l,label:p,disabled:j}),q})},[]),f=s.useCallback(l=>{b(p=>{const j=new Map(p);return j.delete(l),j})},[]),v=s.useCallback(l=>{if(l)return u.get(l)?.label},[u]);s.useEffect(()=>{if(o){const l=Array.from(u.values()).filter(p=>!p.disabled).map(p=>p.value);w(i??l[0])}},[o,i,u]);const y=s.useMemo(()=>({open:o,setOpen:d,value:i,setValue:N,registerItem:g,unregisterItem:f,getLabel:v,triggerRef:r,highlightedValue:x,setHighlightedValue:w,disabled:m}),[o,i,N,g,f,v,x,m]);return n.jsx(V.Provider,{value:y,children:c})},E=s.forwardRef(({className:e,children:a,asChild:t=!1,disabled:c,...m},o)=>{const{open:d,setOpen:h,triggerRef:S,disabled:u}=C(),b=c||u,x=r=>{S.current=r,typeof o=="function"?o(r):o&&(o.current=r)},w=r=>{b||(m.onClick?.(r),r.defaultPrevented||h(!d))};return t&&s.isValidElement(a)?s.cloneElement(a,{ref:x,onClick:w,className:R(a.props?.className,e),"aria-haspopup":"listbox","aria-expanded":d,"aria-disabled":b||void 0}):n.jsxs("button",{type:"button",ref:x,onClick:r=>w(r),"aria-haspopup":"listbox","aria-expanded":d,"aria-disabled":b||void 0,disabled:b,className:R("group flex h-10 w-full items-center justify-between rounded-lg border border-border-primary bg-surface-primary px-3 py-2 text-sm ring-offset-background placeholder:text-text-tertiary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 shadow-sm hover:bg-surface-secondary/50 transition-colors",e),...m,children:[a,n.jsx(T,{className:"h-4 w-4 opacity-50 group-data-[state=open]:rotate-180 transition-transform duration-200"})]})});E.displayName="SelectTrigger";const z=({placeholder:e="Select an option",className:a,children:t})=>{const{value:c,getLabel:m}=C(),o=m(c);return n.jsx("span",{className:R("truncate",a),children:o??t??e})},I=s.forwardRef(({className:e,children:a},t)=>{const{open:c,setOpen:m,triggerRef:o,highlightedValue:d,setHighlightedValue:h,value:S}=C(),u=s.useRef(null),b=i=>{u.current=i,typeof t=="function"?t(i):t&&(t.current=i)},[x,w]=s.useState({top:0,left:0,width:0}),r=s.useCallback(()=>{const i=o.current,N=u.current;if(!i||!N)return;const g=i.getBoundingClientRect(),f=g.width;let v=g.left,y=g.bottom+4;const l=N.getBoundingClientRect();v+l.width>window.innerWidth-8&&(v=window.innerWidth-l.width-8),v<8&&(v=8),y+l.height>window.innerHeight-8&&(y=g.top-l.height-4),w({top:y,left:v,width:f})},[o]);return s.useLayoutEffect(()=>{c&&r()},[c,r]),s.useEffect(()=>{if(!c)return;const i=f=>{const v=f.target;u.current?.contains(v)||o.current?.contains(v)||m(!1)},N=f=>{if(!c)return;const v=u.current?.querySelectorAll("[data-select-item]:not([data-disabled=true])")??[],y=Array.from(v).map(p=>p.dataset.value).filter(Boolean);if(f.key==="Escape"&&m(!1),y.length===0)return;const l=d?y.indexOf(d):-1;if(f.key==="ArrowDown"){f.preventDefault();const p=y[(l+1)%y.length];h(p)}if(f.key==="ArrowUp"){f.preventDefault();const p=y[(l-1+y.length)%y.length];h(p)}if(f.key==="Enter"||f.key===" "){f.preventDefault();const p=d??y[0];p&&u.current?.querySelector(`[data-select-item="${p}"]`)?.click()}},g=()=>r();return document.addEventListener("mousedown",i),document.addEventListener("keydown",N),window.addEventListener("resize",g),window.addEventListener("scroll",g,!0),()=>{document.removeEventListener("mousedown",i),document.removeEventListener("keydown",N),window.removeEventListener("resize",g),window.removeEventListener("scroll",g,!0)}},[c,m,d,h,r]),c?D.createPortal(n.jsx("div",{ref:b,role:"listbox","aria-activedescendant":d?`select-item-${d}`:void 0,className:R("relative z-50 min-w-[8rem] overflow-hidden rounded-xl border border-border-primary bg-surface-glass backdrop-blur-xl text-text-primary shadow-lg p-1",e),style:{position:"fixed",top:x.top,left:x.left,minWidth:x.width},"data-state":c?"open":"closed",children:a}),document.body):null});I.displayName="SelectContent";const A=s.forwardRef(({className:e,...a},t)=>n.jsx("div",{ref:t,className:R("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a}));A.displayName="SelectLabel";const _=s.forwardRef(({value:e,disabled:a=!1,children:t,className:c,...m},o)=>{const{value:d,setValue:h,registerItem:S,unregisterItem:u,highlightedValue:b,setHighlightedValue:x}=C(),w=s.useMemo(()=>typeof t=="string"?t:s.isValidElement(t)?t.props?.children??e:e,[t,e]);s.useEffect(()=>(S(e,String(w),a),()=>u(e)),[e,w,a,S,u]);const r=d===e,i=b===e;return n.jsxs("button",{ref:o,id:`select-item-${e}`,role:"option",type:"button","data-select-item":e,"data-value":e,"data-disabled":a?"true":void 0,"aria-selected":r,disabled:a,onMouseEnter:()=>x(e),onFocus:()=>x(e),onClick:()=>!a&&h(e),className:R("relative flex w-full cursor-default select-none items-center rounded-md py-1.5 pl-8 pr-2 text-sm outline-none transition-colors",r?"bg-accent-blue text-white":i?"bg-surface-secondary text-text-primary":"text-text-primary",a&&"pointer-events-none opacity-50",c),...m,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r&&n.jsx(k,{className:"h-4 w-4"})}),n.jsx("span",{className:"truncate",children:t})]})});_.displayName="SelectItem";const L=s.forwardRef(({className:e,...a},t)=>n.jsx("div",{ref:t,className:R("-mx-1 my-1 h-px bg-border-primary",e),...a}));L.displayName="SelectSeparator";const M=({className:e,children:a})=>n.jsx("div",{className:R("py-1",e),children:a}),H=({label:e,options:a,value:t,onChange:c,icon:m,multiselect:o=!1,className:d=""})=>{const[h,S]=s.useState(!1),u=r=>{if(o){const i=Array.isArray(t)?t:[],N=i.includes(r.value)?i.filter(g=>g!==r.value):[...i,r.value];c?.(N)}else c?.(r.value),S(!1)},b=r=>Array.isArray(t)?t.includes(r):t===r,w=t?Array.isArray(t)?t.length===0?null:t.length===1?a.find(N=>N.value===t[0])?.label:`${t.length} selected`:a.find(i=>i.value===t)?.label:null;return n.jsxs("div",{className:R("relative",d),children:[n.jsxs("button",{onClick:()=>S(!h),className:R("inline-flex items-center gap-2 px-4 py-2 rounded-lg","border transition-all",w?"bg-accent-blue/10 border-accent-blue/30 text-accent-blue":"bg-surface-secondary border-border-primary text-text-primary hover:bg-surface-tertiary"),children:[m||n.jsx(T,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium",children:w||e}),n.jsx(T,{className:R("w-4 h-4 transition-transform",h&&"rotate-180")})]}),h&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>S(!1)}),n.jsx("div",{className:"absolute top-full left-0 mt-2 w-64 bg-surface-primary border border-border-primary rounded-xl shadow-lg z-20 overflow-hidden",children:n.jsx("div",{className:"max-h-80 overflow-y-auto p-2",children:a.map(r=>{const i=b(r.value);return n.jsxs("button",{onClick:()=>u(r),className:R("w-full flex items-center justify-between px-3 py-2 rounded-lg","text-sm transition-colors",i?"bg-accent-blue/10 text-accent-blue":"text-text-primary hover:bg-surface-secondary"),children:[n.jsxs("div",{className:"flex items-center gap-2",children:[o&&n.jsx("div",{className:R("w-4 h-4 rounded border flex items-center justify-center",i?"bg-accent-blue border-accent-blue":"border-border-primary"),children:i&&n.jsx(k,{className:"w-3 h-3 text-white"})}),n.jsx("span",{children:r.label})]}),r.count!==void 0&&n.jsx("span",{className:"text-xs text-text-tertiary",children:r.count})]},r.id)})})})]})]})};H.__docgenInfo={description:"",methods:[],displayName:"FilterSelect",props:{label:{required:!0,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"FilterSelectOption"}],raw:"FilterSelectOption[]"},description:""},value:{required:!1,tsType:{name:"union",raw:"string | string[]",elements:[{name:"string"},{name:"Array",elements:[{name:"string"}],raw:"string[]"}]},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string | string[]) => void",signature:{arguments:[{type:{name:"union",raw:"string | string[]",elements:[{name:"string"},{name:"Array",elements:[{name:"string"}],raw:"string[]"}]},name:"value"}],return:{name:"void"}}},description:""},icon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},multiselect:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}}}};F.__docgenInfo={description:"",methods:[],displayName:"Select",props:{value:{required:!1,tsType:{name:"string"},description:""},defaultValue:{required:!1,tsType:{name:"string"},description:""},onValueChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};M.__docgenInfo={description:"",methods:[],displayName:"SelectGroup",props:{className:{required:!1,tsType:{name:"string"},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};z.__docgenInfo={description:"",methods:[],displayName:"SelectValue",props:{placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Select an option"',computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};E.__docgenInfo={description:"",methods:[],displayName:"SelectTrigger",props:{asChild:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};I.__docgenInfo={description:"",methods:[],displayName:"SelectContent",props:{className:{required:!1,tsType:{name:"string"},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};A.__docgenInfo={description:"",methods:[],displayName:"SelectLabel"};_.__docgenInfo={description:"",methods:[],displayName:"SelectItem",props:{value:{required:!0,tsType:{name:"string"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};L.__docgenInfo={description:"",methods:[],displayName:"SelectSeparator"};export{H as F,F as S,E as a,z as b,I as c,M as d,A as e,_ as f};
