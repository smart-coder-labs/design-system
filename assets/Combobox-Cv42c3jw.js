import{j as r}from"./jsx-runtime-u17CrQMm.js";import{r as t}from"./iframe-vYzePaRW.js";import{c as d}from"./utils-CDN07tui.js";import{C as q}from"./chevrons-up-down-DXJEmuLb.js";import{A}from"./index-4cmsJ5fh.js";import{m as I}from"./proxy-DMGrdN83.js";import{S as L}from"./search-B_MjFKX0.js";function O({items:u,value:h,onChange:N,placeholder:C="Select an item...",searchPlaceholder:E="Search...",emptyMessage:S="No item found.",disabled:b=!1,className:y}){const[s,o]=t.useState(!1),[c,g]=t.useState(""),[n,l]=t.useState(0),v=t.useRef(null),f=t.useRef(null),p=t.useRef(null),m=t.useRef(null),[w,D]=t.useState(null),i=t.useMemo(()=>c?u.filter(e=>e.label.toLowerCase().includes(c.toLowerCase())):u,[u,c]),x=u.find(e=>e.value===h);t.useEffect(()=>{l(0)},[c]),t.useEffect(()=>{s&&(setTimeout(()=>v.current?.focus(),50),g(""),l(0))},[s]);const k=e=>{N?.(e),o(!1)},j=e=>{if(!s){(e.key==="Enter"||e.key==="ArrowDown"||e.key===" ")&&(e.preventDefault(),o(!0));return}switch(e.key){case"ArrowDown":e.preventDefault(),l(a=>a<i.length-1?a+1:0);break;case"ArrowUp":e.preventDefault(),l(a=>a>0?a-1:i.length-1);break;case"Enter":e.preventDefault(),n>=0&&i[n]&&k(i[n].value);break;case"Escape":e.preventDefault(),o(!1);break;case"Tab":o(!1);break}};return t.useEffect(()=>{if(s&&f.current&&n>=0){const e=f.current.children[n];e&&e.scrollIntoView({block:"nearest"})}},[n,s]),t.useLayoutEffect(()=>{p.current&&D(p.current.offsetWidth)},[y]),t.useEffect(()=>{if(!s)return;const e=a=>{m.current&&!m.current.contains(a.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[s]),r.jsxs("div",{className:"relative w-full",ref:m,children:[r.jsxs("button",{ref:p,role:"combobox","aria-expanded":s,disabled:b,className:d("group flex h-10 w-full items-center justify-between rounded-lg border border-border-primary bg-surface-primary px-3 py-2 text-sm ring-offset-background placeholder:text-text-tertiary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 shadow-sm hover:bg-surface-secondary/50 transition-colors",y),onKeyDown:j,onClick:()=>!b&&o(e=>!e),children:[r.jsx("span",{className:d("truncate",!x&&"text-text-tertiary"),children:x?x.label:C}),r.jsx(q,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]}),r.jsx(A,{children:s&&r.jsxs(I.div,{initial:{opacity:0,scale:.95,y:-6},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-6},transition:{duration:.12,ease:"easeOut"},"data-state":s?"open":"closed",className:d("absolute z-50 overflow-hidden rounded-xl border border-border-primary bg-surface-glass backdrop-blur-xl text-text-primary shadow-lg","p-0"),style:{minWidth:w?`${w}px`:void 0,top:"calc(100% + 4px)",left:0},children:[r.jsxs("div",{className:"flex items-center border-b border-border-primary px-3",children:[r.jsx(L,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),r.jsx("input",{ref:v,className:"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-text-tertiary disabled:cursor-not-allowed disabled:opacity-50",placeholder:E,value:c,onChange:e=>g(e.target.value),onKeyDown:j})]}),r.jsx("div",{ref:f,className:"max-h-[200px] overflow-y-auto overflow-x-hidden py-1",onMouseLeave:()=>l(-1),children:i.length===0?r.jsx("div",{className:"p-2 text-center text-sm text-text-tertiary",children:S}):i.map((e,a)=>{const T=e.value===h,R=a===n;return r.jsx("div",{className:d("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors mx-1",T?"bg-accent-blue text-white":R?"bg-surface-secondary text-text-primary":"text-text-primary",e.disabled&&"pointer-events-none opacity-50"),onClick:()=>!e.disabled&&k(e.value),onMouseEnter:()=>l(a),children:r.jsx("span",{className:"truncate",children:e.label})},e.value)})})]},"combobox-popover")})]})}O.__docgenInfo={description:"",methods:[],displayName:"Combobox",props:{items:{required:!0,tsType:{name:"Array",elements:[{name:"ComboboxOption"}],raw:"ComboboxOption[]"},description:""},value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Select an item..."',computed:!1}},searchPlaceholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Search..."',computed:!1}},emptyMessage:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"No item found."',computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""}}};export{O as C};
